pre-commit:
  parallel: true
  commands:
    gitleaks:
      glob: '*'
      run: gitleaks protect --staged --verbose
      fail_text: Secrets detected! Remove them before committing.
    nixfmt:
      glob: '*.nix'
      run: nixfmt {staged_files}
      stage_fixed: true
pre-push:
  commands:
    flake-check:
      run: nix flake check
      fail_text: Flake check failed! Fix issues before pushing
